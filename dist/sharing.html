<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEM Flower by Up4TheChallenge</title>
    <!-- Link to the external stylesheet for styling the page -->
    <link rel="stylesheet" href="Assets/sharingPage.css">
</head>
<body>
    <!-- Centered card profile -->
    <div class="card-container">
        <div class="card">
            <div class="side front">
                <div class="project-title" id="projectTitle"></div>
                <div class="created-by" id="createdBy"></div>
                <div class="card-content">
                    <div class="social-outcomes">
                        <ul id="socialOutcomes"></ul>
                    </div>
                    <div class="stem">
                        <ul id="stemContent"></ul>
                    </div>
                </div>
            </div>
            <div class="side back" id="backImage" style="background-image: url('Assets/images/card_back_default.jpg');">
                <div class="project-summary" id="projectSummary"></div>
            </div>
        </div>
    </div>
    
    <!-- Button to upload the flower to the garden -->
    <button id="uploadButton">Upload</button>
    <!-- Button to rebuild the flower -->
    <button id="rebuildButton">Rebuild</button>
    <!-- Hidden link to the next page, displayed after upload -->
    <a href="garden.html" style="display: none;" id="nextButton">
        <button>Nextâ†’</button>
    </a>

    <!-- Audio element for the hover sound effect -->
    <audio id="hoverSound" src="Assets/audio/pop sound effect.mp3"></audio>

    <script>
        // Event listener to play/pause the audio on button hover
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('button');
            const audio = document.getElementById('hoverSound');

            buttons.forEach(button => {
                button.addEventListener('mouseover', function() {
                    audio.play();
                });

                button.addEventListener('mouseout', function() {
                    audio.pause();
                    audio.currentTime = 0;
                });
            });

            // Show the Next button after clicking the Upload button
            const shareButton = document.getElementById('uploadButton');
            const nextButton = document.getElementById('nextButton');

            shareButton.addEventListener('click', function() {
                nextButton.style.display = 'block'; // Show the Next button
            });

            // Load and display project data
            const projectTitle = localStorage.getItem('textPage2');
            const createdBy = localStorage.getItem('textPageAuthor') || 'Unknown Author';
            const socialOutcomes = [
                localStorage.getItem('textPage4'),
                localStorage.getItem('textPage5'),
                localStorage.getItem('textPage6'),
                localStorage.getItem('textPage7'),
                localStorage.getItem('textPage8'),
                localStorage.getItem('textPage9'),
                localStorage.getItem('textPage10')
            ];
            const stemContent = [
                localStorage.getItem('textArea1'),
                localStorage.getItem('textArea2'),
                localStorage.getItem('textArea3'),
                localStorage.getItem('textArea4'),
                localStorage.getItem('textArea5')
            ];
            const solveWhatProblem = localStorage.getItem('textPage3');
            const backImageUrl = 'Assets/images/default_back.png'; // Change if you have a dynamic URL

            // Populate the card
            document.getElementById('projectTitle').innerText = projectTitle;
            document.getElementById('createdBy').innerText = `${createdBy}`;
            const socialOutcomesList = document.getElementById('socialOutcomes');
            socialOutcomes.forEach((outcome, index) => {
                if (outcome) {
                    const li = document.createElement('li');
                    li.innerText = `${index + 1}. ${outcome}`;
                    socialOutcomesList.appendChild(li);
                }
            });
            const stemList = document.getElementById('stemContent');
            stemContent.forEach((stem, index) => {
                if (stem) {
                    const li = document.createElement('li');
                    li.innerText = `${index + 1}. ${stem}`;
                    stemList.appendChild(li);
                }
            });
            document.getElementById('projectSummary').innerText = `${projectTitle} provided a way for ${localStorage.getItem('textPage2.5')} to ${solveWhatProblem}.`;
            document.getElementById('backImage').style.backgroundImage = `url('${backImageUrl}')`;
        });

        // Add confirmation dialog to Rebuild button
        document.getElementById('rebuildButton').addEventListener('click', function(event) {
            const confirmRebuild = confirm("Are you sure you want to rebuild? This will discard your current progress.");
            if (confirmRebuild) {
                window.location.href = 'page2.html'; // Redirect to page2.html if confirmed
            }
        });
    </script>
    
    <!-- Link to the bundled JavaScript file -->
    <script src="bundle.js"></script>
</body>
</html>
